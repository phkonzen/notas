%Este trabalho está licenciado sob a Licença Atribuição-CompartilhaIgual 4.0 Internacional Creative Commons. Para visualizar uma cópia desta licença, visite http://creativecommons.org/licenses/by-sa/4.0/ ou mande uma carta para Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.

\chapter{Diferenciação}\label{cap_derivada}\index{diferenciação}
\thispagestyle{fancy}

\section{Derivada}\label{cap_derivada_sec_der}\index{derivada}

\begin{defn}\normalfont{(Derivada)}
  Dizemos que uma função $f:D\to\mathbb{R}$, $y=f(x)$, é \emph{derivável}\index{derivável} (ou \emph{diferenciável}\index{diferenciável}) no ponto $x=x_0\in D$, se existe o limite da \emph{razão fundamental}
  \begin{equation}
    \frac{f(x) - f(x_0)}{x-x_0}
  \end{equation}
quando $x\to x_0$. Neste caso, o valor do limite é chamado de derivada da função $f$ no ponto $x_0$ e denotado por $f'(x_0)$, $Df(x_0)$ ou $\displaystyle\frac{df}{dx}(x_0)$.
\end{defn}

\begin{ex}
  Para $f(x) = \sqrt{x}$ temos $f'(2) = 1/(2\sqrt{2})$. De fato,
  \begin{equation}
      \lim_{x\to 2} \frac{\sqrt{x} - \sqrt{2}}{x-2} = \lim_{x\to 2}\frac{x-2}{(x-2)(\sqrt{x}+\sqrt{2})} = \frac{1}{2\sqrt{2}}.\\
  \end{equation}
\end{ex}

\begin{obs}
  Observemos que
  \begin{equation}
    f'(x_0) = \lim_{x\to x_0} \frac{f(x)-f(x_0)}{x-x_0} = \lim_{h\to 0} \frac{f(x_0+h) - f(x_0)}{h}
  \end{equation}
usando a mudança de variável $x=x_0+h$.
\end{obs}

\begin{defn}\normalfont{(Função derivada)}\label{defn:funcao_derivada}
  Dizemos que $f:D\to\mathbb{R}$ é uma \emph{função derivável}\index{função derivável} em todo o seu domínio (ou em toda parte) quando $f$ é derivável em todos os pontos de seu domínio. Neste caso, definição a função derivada de $f$ por $f':D\to\mathbb{R}$, $y=f'(x)$, com
  \begin{equation}
    f'(x) = \lim_{h\to 0} \frac{f(x_0+h) - f(x_0)}{h}.
  \end{equation}
\end{defn}

\begin{obs}
  A \emph{derivada lateral}\index{derivada!lateral} à direita ou à esquerda são definidas a partir da noção de limite lateral por
  \begin{equation}
    D_+f(x_0) = \lim_{h\to 0^+} \frac{f(x_0+h) - f(x_0)}{h}
  \end{equation}
  e
  \begin{equation}
    D_-f(x_0) = \lim_{h\to 0^-} \frac{f(x_0+h) - f(x_0)}{h},
  \end{equation}
  respectivamente. Além disso, é imediato que $Df(x_0)$ existe se, e somente se, existem e são iguais as derivadas laterais $D_+f(x_0)$ e $D_-f(x_0)$.
\end{obs}

\begin{teo}
  Toda função derivável num ponto $x_0$ é contínua nesse ponto.
\end{teo}
\begin{dem}
  Seja $f:D\to\mathbb{R}$, $y=f(x)$, uma função derivável no ponto $x_0\in D$. Vamos mostrar que $f(x)-f(x_0)\to 0$ quando $x\to x_0$. De fato, para $x\neq x_0$ temos
  \begin{equation}
    f(x) - f(x_0) = \frac{f(x) - f(x_0)}{x-x_0}(x-x_0).
  \end{equation}
Agora, 
\begin{equation}
  \lim_{x\to x_0} \frac{f(x) - f(x_0)}{x-x_0} = f'(x_0)\in\mathbb{R}\quad\text{e}\quad\lim_{x\to x_0} x-x_0 = 0,
\end{equation}
logo $f(x)-f(x_0)\to 0$ quando $x\to x_0$.
\end{dem}

\begin{defn}\normalfont{(Diferencial)}
  A diferencial de uma função derivável $f$ no ponto $x_0$ é o produto $dy := f'(x_0)\Delta x$, onde $\Delta x = x-x_0$.
\end{defn}

\begin{obs}
  De sorte que o diferencial da função identidade $y = x$ é $dx = \Delta x$ e, portanto, o diferencial de uma dada função $y = f(x)$ é $dy = f'(x_0)dx$ e, também $f'(x_0) = dy/dx$.
\end{obs}

\subsection*{Exercícios}

\begin{exer}
  Dê um exemplo de uma função contínua num ponto $x_0$ e não derivável neste mesmo ponto. Justifique sua resposta.
\end{exer}

\begin{exer}
  Mostre, a partir da definição da derivada de uma função (Definição~\ref{defn:funcao_derivada}) que
  \begin{enumerate}
  \item $(x^n)' = nx^{n-1}$, $n\in\mathbb{N}$.
  \item $(1/x)' = -1/x^2$.
  \item $(\sqrt{x})' = 1/(2\sqrt{x})$.
  \end{enumerate}
\end{exer}

\section{Regras operacionais}\label{cap_derivada_sec_regras}

\begin{teo}\normalfont{Regras operacionais}
  Se $f:D\to\mathbb{R}$ e $g:D\to\mathbb{R}$ são funções diferenciáveis no ponto $x\in D$, então também são deriváveis no mesmo ponto as funções $f+g$, $kf$, $fg$ e, no caso de $g(x)\neq 0$, $f/g$. Aĺém disso, temos:
  \begin{align}
    &(f+g)'(x) = f'(x) + g'(x),\\
    &(kf)'(x) = kf'(x),\\
    &(fg)'(x) = f'(x)g(x) + f(x)g'(x),\\
    &(f/g)'(x) = \frac{f'(x)g(x) - f(x)g'(x)}{g^2(x)},\quad\text{se }g(x)\neq 0.
  \end{align}
\end{teo}
\begin{dem}
  Deixaremos como exercício a demonstração para as funções $f+g$ e $kf$ (veja, Exercício~\ref{exer:derivada_da_soma_e_da_mult_por_escalar}). Para o caso de $fg$, basta observar que:
  \begin{align}
    \lim_{h\to 0} &\frac{(fg)(x+h)-(fg)(x)}{h} = \lim_{h\to 0} \frac{f(x+h)g(x+h)-f(x)g(x)}{h}\\
                  &= \lim_{h\to 0} \frac{f(x+h)g(x+h) - f(x)g(x+h) + f(x)g(x+h) -f(x)g(x)}{h}\\
                  &= \lim_{h\to 0} \frac{f(x+h) - f(x)}{h}g(x+h) + \lim_{h\to 0} f(x) \frac{g(x+h) - g(x)}{h}\\
                  &= f'(x)g(x) + f(x)g'(x).
  \end{align}
Agora, para mostrar que $f/g$ é diferenciável no ponto $x\in D$ basta mostrar para o caso de $f\equiv 1$. De fato,
\begin{align}
  \lim_{h\to 0} \frac{1}{h}\left(\frac{1}{g(x+h)}-\frac{1}{g(x)}\right) &= \lim_{h\to 0} -\frac{g(x+h)-g(x)}{h}\frac{1}{g(x+h)g(x)}\\
                                                                        &= -\frac{g'(x)}{g^2(x)}.
\end{align}
\end{dem}

\begin{teo}\normalfont{(Regra da cadeia)}
  Sejam $g:D_g\to\mathbb{R}$ derivável no ponto $x\in D_g$, $f:D_f\to\mathbb{R}$ com $g(D_g)\subset D_f$ e derivável no ponto $y=g(x)$. Nestas condições, a função composta $f\circ g$ é diferenciável no ponto $x$ e $(f\circ g)'(x) = f'(g(x))g'(x)$.
\end{teo}
\begin{dem}
  Como $f$ é derivável em $y=g(x)$, temos
  \begin{equation}
    \frac{f(y+k) - f(y)}{k} = f'(y) + \eta(k),
  \end{equation}
com $\eta(k)\to 0$ quando $k\to 0$. Rearranjando temos
\begin{equation}
  f(y+k)-f(y) = k[f'(y) + \eta(k)]
\end{equation}
inclusive para $k=0$. Agora, para todo $h$ suficientemente pequeno, pomos $k = g(x+h) - g(x)$ e, então
\begin{align}
  \frac{f(g(x+h))-f(g(x))}{h} &= \frac{f(y+k)-f(y)}{h}\\
                              &= \frac{[f'(y)+\eta(k)]k}{h}\\
                              &= [f'(y) + eta(k)]\frac{g(x+h)-g(x)}{h}\\
                              &\to f'(g(x))g'(x),\quad\text{com }h\to 0.
\end{align}
\end{dem}

\begin{teo}\normalfont{(Derivada da função inversa)}
  Seja $f:I=(a, b)\to\mathbb{R}$, $y=f(x)$, uma função derivável em $I$ com $f'(x)$ sempre positiva ou sempre negativa. Então, sua inversa $x=f^{-1}(y)$ é derivável no intervalo $J = f(I)$ e $(f^{-1})'(y) = 1/f'(g(x))$.
\end{teo}
\begin{dem}
  Sejam $y,y_0\in J$, $x=f^{-1}(y)$ e $x_0=f^{-1}(y_0)$. Notemos que
  \begin{equation}
    \frac{f^{-1}(y)-f^{-1}g(y_0)}{y-y_0} = \frac{x-x_0}{f(x)-f(x_0)} = \left[\frac{f(x)-f(x_0)}{x-x_0}\right]^{-1}.
  \end{equation}
Agora, basta observar que quando $y\to y_0$, temos $x\to x_0$ pela continuidade da $f^{-1}$. Logo, tomando o limite nas expressões acima, temos o resultado desejado.
\end{dem}

\subsection*{Exercícios}

\begin{exer}\label{exer:derivada_da_soma_e_da_mult_por_escalar}
  Mostre que se $f,g:D\to\mathbb{R}$ são funções diferenciáveis num ponto $x\in D$, então também são as funções $f+g$ e $kf$, sendo:
  \begin{equation}
    (f+g)'(x) = f'(x) + g'(x)\quad\text{e}\quad (kf)'(x) = kf'(x).
  \end{equation}
\end{exer}
\begin{resp}
  Segue da definição de derivada.
\end{resp}

\section{Extremos e o teorema do valor médio}\label{cap_derivada_sec_extremos}

\begin{teo}\label{teo:ponto_critico}
  Se $f:D\to\mathbb{R}$ é derivável num ponto $c\in D$ no qual ela assume valor máximo ou mínimo local, então $f'(c) = 0$. 
\end{teo}
\begin{dem}
  No caso de $c$ ser ponto de mínimo local de $f$, então existe $\delta>0$ tal que $f(c+h)-f(c) \geq 0$ para todo $|h|<\delta$. Logo, temos
  \begin{equation}
    \lim_{h\to 0^+} \frac{f(c+h)-f(c)}{h} \geq 0\quad\text{e}\quad\lim_{h\to 0^-} \frac{f(c+h)-f(c)}{h} \leq 0.
  \end{equation}
Mas, então, como $f$ é diferenciável no ponto $c$, necessariamente $f'(c)=0$. Um raciocínio análogo mostra o resultado para o caso de $c$ ser ponto de máximo local (veja o Exercício~\ref{exer:ponto_de_minimo}.
\end{dem}

\begin{teo}\normalfont{(Teorema de Rolle)}\label{teo:Rolle}
  Se $f:[a, b]\to\mathbb{R}$ é uma função contínua em todo o seu domínio, derivável no intervalo aberto $(a, b)$ e $f(a) = f(b)$, então existe $c\in (a, b)$ tal que $f'(c)=0$.
\end{teo}
\begin{dem}
  Se $f$ é constante, então $f'(c)=0$ para todo $c\in(a, b)$. Caso contrário, $f$ terá que assumir valores maiores ou menores que $f(a)=f(b)$. Como $f$ é contínua no intervalo fechado $[a, b]$ ela assumirá valor máximo ou mínimo em algum ponto $c \in (a, b)$ (veja Teorema~\ref{teo:funcao_continua_valores_extremos}). Então, pelo Teorema~\ref{teo:ponto_critico}, temos $f'(c)=0$.
\end{dem}

\begin{teo}\normalfont{(Teorema do valor médio)}
  Se $f:[a, b]\to\mathbb{R}$ é uma função contínua em todo o seu domínio e derivável no intervalo $(a, b)$, então existe $c\in (a, b)$ tal que
  \begin{equation}
    \frac{f(b) - f(a)}{b - a} = f'(c).
  \end{equation}
\end{teo}
\begin{dem}
  Seja
  \begin{equation}
    g(x) = f(x) - f(a) - \frac{f(b) - f(a)}{b - a}(x-a).
  \end{equation}
Observamos que $g$ é contínua em $[a, b]$, derivável em $(a, b)$ e $g(a)=g(b)=0$. Logo, pelo Teorema de Rolle\index{teorema de!Rolle}, temos que existe $c\in (a, b)$ tal que $g'(c) = 0$, mas daí $f'(c)$ satisfaz o resultado desejado.
\end{dem}

\begin{teo}\normalfont{(Teorema do valor médio generalizado)}\label{teo:valor_medio_generalizado}
  Sejam $f:[a, b]\to\mathbb{R}$ e $g:[a, b]\to\mathbb{R}$ funções contínuas em todo o seu domínio e deriváveis no intervalo $(a, b)$. Além disso, suponhamos que $g'(x)\neq 0$ e $g(b)-g(a)\neq 0$, então existe $c\in (a, b)$ tal que
  \begin{equation}
    \frac{f(b) - f(a)}{g(b) - g(a)} = \frac{f'(c)}{g'(c)}.
  \end{equation}
\end{teo}
\begin{dem}
  Veja o Exercício~\ref{exer:teo_valor_medio_generalizado}.
\end{dem}

\subsection*{Exercícios}

\begin{exer}\label{exer:ponto_de_minimo}
  Mostre que se $f:D\to\mathbb{R}$ é derivável num ponto $c\in D$ no qual ela assume valor máximo local, então $f'(c) = 0$.   
\end{exer}

\begin{exer}
  Use o teorema do valor médio para mostrar que se $f:[a, b]\to \mathbb{R}$ é contínua em todo o seu domínio e $f'(x)>0$ para todo $x\in (a, b)$, então $f$ é uma função crescente.
\end{exer}

\begin{exer}
  Mostre que se $f:[a, b]\to\mathbb{R}$ é diferenciável em $(a, b)$ e $f'$ é limitada em $(a, b)$, então $f$ é uniformemente contínua.
\end{exer}

\begin{exer}\label{exer:teo_valor_medio_generalizado}
  Mostre o Teorema~\ref{teo:valor_medio_generalizado}.
\end{exer}
\begin{resp}
  Aplique o teorema de Rolle (Teorema~\ref{teo:Rolle}) para a função $\displaystyle F(x) := f(x) - f(a) + \frac{f(b)-f(a)}{g(b)-g(a)}[g(x)-g(a)]$.
\end{resp}